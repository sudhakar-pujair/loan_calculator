<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EMI Calculator — CloudBridge</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- SheetJS (Excel) -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- jsPDF and html2canvas for PDF generation -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>

<div class="topbar">
  <div class="topbar-left">
    <h1>EMI Calculator</h1>
    <p class="muted">Calculate schedules, export Excel/PDF, view charts — all in browser.</p>
  </div>
  <div class="topbar-right">
    <label class="switch">
      <input id="themeToggle" type="checkbox" />
      <span class="slider"></span>
    </label>
    <span class="theme-label" id="themeLabel">Light</span>
  </div>
</div>

<main class="container">

  <!-- Card: Inputs -->
  <section class="card" id="inputCard">
    <form id="emiForm" class="form-row" autocomplete="off">
      <div class="form-group">
        <label for="principal">Principal (₹)</label>
        <input id="principal" type="number" min="0" step="1" placeholder="e.g. 1429094">
        <div class="error" id="errPrincipal"></div>
      </div>

      <div class="form-group">
        <label for="emi">EMI (₹) <span class="hint">(leave empty to compute from tenure)</span></label>
        <input id="emi" type="number" min="0" step="1" placeholder="e.g. 100000">
        <div class="error" id="errEmi"></div>
      </div>

      <div class="form-group">
        <label for="rate">Annual Interest (%)</label>
        <input id="rate" type="number" min="0" step="0.01" placeholder="e.g. 14">
        <div class="error" id="errRate"></div>
      </div>

      <div class="form-group">
        <label for="tenure">Tenure (months) <span class="hint">(optional)</span></label>
        <input id="tenure" type="number" min="1" step="1" placeholder="e.g. 16">
        <div class="error" id="errTenure"></div>
      </div>

      <div class="actions">
        <button id="calculate" type="button" class="btn primary">Calculate</button>
        <button id="downloadExcel" type="button" class="btn">Download Excel</button>
        <button id="downloadPdf" type="button" class="btn">Download PDF</button>
      </div>
    </form>
  </section>

  <!-- Card: Summary & Charts -->
  <section class="card" id="summaryCard">
    <div class="summary-grid">
      <div class="summary-item">
        <div class="label">Principal</div>
        <div class="value" id="r_principal">—</div>
      </div>
      <div class="summary-item">
        <div class="label">EMI</div>
        <div class="value" id="r_emi">—</div>
      </div>
      <div class="summary-item">
        <div class="label">Interest Rate</div>
        <div class="value" id="r_rate">—</div>
      </div>
      <div class="summary-item">
        <div class="label">Total Months</div>
        <div class="value" id="r_months">—</div>
      </div>
      <div class="summary-item">
        <div class="label">Total Interest Paid</div>
        <div class="value" id="r_interest">—</div>
      </div>
      <div class="summary-item">
        <div class="label">Total Principal Paid</div>
        <div class="value" id="r_total_principal">—</div>
      </div>
    </div>

    <div class="charts">
      <canvas id="balanceChart" height="160"></canvas>
      <canvas id="doughnutChart" height="160"></canvas>
    </div>
  </section>

  <!-- Card: Schedule Table -->
  <section class="card" id="tableCard">
    <h3>EMI Schedule</h3>
    <div class="table-wrap" id="pdfContent">
      <table id="scheduleTable">
        <thead>
          <tr>
            <th>Month</th>
            <th>Opening Principal</th>
            <th>EMI</th>
            <th>Principal Repaid</th>
            <th>Interest</th>
            <th>Closing Principal</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

</main>

<!-- App JS -->
<script src="script.js"></script>
</body>
</html>
